{"version":3,"sources":["components/Messages.js","components/Utils.js","components/Header.js","components/constants.js","components/api.js","components/RepoAdd.js","components/RepoList.js","components/BuildStatus.js","components/BuildActions.js","components/BuildList.js","components/Home.js","components/DetailsCard.js","components/BuildLog.js","App.js","index.js"],"names":["T","message","Messages","formatError","data","code","links","Header","props","state","l","this","sectionId","section","id","class","className","href","src","alt","role","map","active","subsection","key","link","Component","Constants","baseUrl","window","location","protocol","hostname","port","service","build","repo","cancelCallback","axios","post","constants","buildList","get","buildGet","buildId","buildDelete","delete","repoList","repoCreate","RepoAdd","onChange","type","placeholder","label","value","onClick","appearance","onCancel","RepoList","handleAddClick","e","preventDefault","setState","showAdd","handleCancelClick","handleRepoChange","target","handleRepoCreate","api","then","response","onCreate","error","catch","console","log","records","r","columns","content","name","hash","created","modified","data-key","onBuild","headers","rows","BuildStatus","status","getIcon","BuildActions","title","download","onConfirmDelete","BuildList","handleCancelDelete","confirmDelete","handleConfirmDelete","getAttribute","buildIds","filter","rec","length","handleDoDelete","onDelete","close","dur","moment","duration","minutes","seconds","renderConfirmDelete","Home","poll","setTimeout","getDataBuilds","bind","handleRepoCreateClick","getDataRepos","handleBuildClick","repoId","handleBuildDelete","repos","builds","finally","DetailsCard","fields","f","size","BuildLog","getData","handleScrollClick","scrollLog","changeScroll","record","scrollToBottom","scrollTo","document","body","clientHeight","logs","s","renderLog","App","parts","pathname","split","parseRoute","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.68f145a3.chunk.js","sourcesContent":["export default {\n    'add': 'Add',\n    'add-repo': 'Add repository',\n    'build': 'Build',\n    'build-log': 'Build Log',\n    'build-requests': 'Latest builds',\n    'cancel': 'Cancel',\n    'complete': 'Complete',\n    'confirm-delete': 'Confirm delete',\n    'confirm-delete-message': 'Are you sure you want to delete the build: ',\n    'created': 'Created',\n    'delete': 'Delete',\n    'getting-ready': 'Getting ready for lift off...',\n    'in-progress': 'In Progress',\n    'last-commit': 'Last Commit',\n    'name': 'Name',\n    'repo': 'Repository',\n    'repo-list': 'Watched repositories',\n    'scroll-off': 'Auto-scroll Off',\n    'scroll-on': 'Auto-scroll On',\n    'status': 'Status',\n    'view': 'View',\n}","import Messages from './Messages'\n\nexport function T(message) {\n    const msg = Messages[message] || message;\n    return msg\n}\n\nexport function formatError(data) {\n    let message = T(data.code);\n    if (data.message) {\n        message += ': ' + data.message;\n    }\n    return message;\n}\n\n// URL is in the form:\n//  /section\n//  /section/sectionId\n//  /section/sectionId/subsection\nexport function parseRoute() {\n    const parts = window.location.pathname.split('/')\n\n    switch (parts.length) {\n        case 2:\n            return {section: parts[1]}\n        case 3:\n            return {section: parts[1], sectionId: parts[2]}\n        case 4:\n            return {section: parts[1], sectionId: parts[2], subsection: parts[3]}\n        default:\n            return {}\n    }\n}","import React, { Component } from 'react';\nimport {T} from \"./Utils\";\n\n\nlet links = [];\n\nclass Header extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {};\n    }\n\n    link(l) {\n        if (this.props.sectionId) {\n            // This is the secondary menu\n            return '/' + this.props.section + '/' + this.props.sectionId + '/' + l;\n        } else {\n            return '/' + l;\n        }\n    }\n\n    render() {\n        return (\n            <header id=\"navigation\" class=\"p-navigation header-slim\">\n                <div className=\"p-navigation__banner row\">\n                    <div className=\"p-navigation__logo\">\n                        <div className=\"u-vertically-center\">\n                            <a href=\"/\" className=\"p-navigation__link\">\n                                <img src=\"/static/images/fabrica.png\" alt=\"ubuntu\" />\n                            </a>\n                        </div>\n                    </div>\n\n                    <nav className=\"p-navigation__nav\">\n                        <span className=\"u-off-screen\"><a href=\"#navigation\">Jump to site</a></span>\n                        <ul className=\"p-navigation__links\" role=\"menu\">\n                            {links.map((l) => {\n                                var active = '';\n                                if ((this.props.section === l) || (this.props.subsection === l)) {\n                                    active = ' active'\n                                }\n                                return (\n                                    <li key={l} className={'p-navigation__link' + active} role=\"menuitem\"><a href={this.link(l)}>{T(l)}</a></li>\n                                )\n                            })}\n                        </ul>\n                    </nav>\n                </div>\n            </header>\n        );\n    }\n}\n\nexport default Header;","const API_PREFIX = '/v1/'\n\nfunction getBaseURL() {\n    return window.location.protocol + '//' + window.location.hostname + ':' + window.location.port + API_PREFIX;\n}\n\nlet Constants = {\n    baseUrl: getBaseURL(),\n}\n\nexport default Constants\n","import axios from 'axios'\nimport constants from './constants'\n\nlet service = {\n    build: (repo, cancelCallback) => {\n        return axios.post(constants.baseUrl + 'build', {repo: repo});\n    },\n\n    buildList: (cancelCallback) => {\n        return axios.get(constants.baseUrl + 'builds');\n    },\n\n    buildGet: (buildId, cancelCallback) => {\n        return axios.get(constants.baseUrl + 'builds/' + buildId);\n    },\n\n    buildDelete: (buildId, cancelCallback) => {\n        return axios.delete(constants.baseUrl + 'builds/' + buildId);\n    },\n\n    repoList: (cancelCallback) => {\n        return axios.get(constants.baseUrl + 'repos');\n    },\n\n    repoCreate: (repo, cancelCallback) => {\n        return axios.post(constants.baseUrl + 'repos', {repo: repo});\n    },\n}\n\nexport default service","import React, {Component} from 'react';\nimport {Button, Card, Form, Input, Row} from \"@canonical/react-components\";\nimport {T} from \"./Utils\";\n\nclass RepoAdd extends Component {\n    render() {\n        return (\n            <Row>\n                <Card>\n                    <Form>\n                        <Input onChange={this.props.onChange} type=\"text\" id=\"repo\" placeholder=\"https://github.com/ogra1/fabrica.git\" label=\"Git Repo\" value={this.props.repo}/>\n                        <Button onClick={this.props.onClick} appearance=\"positive\">{T('add')}</Button>\n                        <Button onClick={this.props.onCancel} appearance=\"neutral\">{T('cancel')}</Button>\n                    </Form>\n                </Card>\n            </Row>\n        );\n    }\n}\n\nexport default RepoAdd;","import React, {Component} from 'react';\nimport api from \"./api\";\nimport {formatError, T} from \"./Utils\";\nimport RepoAdd from \"./RepoAdd\";\nimport {MainTable, Row, Button} from \"@canonical/react-components\";\n\nclass RepoList extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            showAdd: false,\n            repo: '',\n        }\n    }\n\n    handleAddClick = (e) => {\n        e.preventDefault()\n        this.setState({showAdd: true})\n    }\n\n    handleCancelClick = (e) => {\n        e.preventDefault()\n        this.setState({showAdd: false})\n    }\n\n    handleRepoChange = (e) => {\n        e.preventDefault()\n        this.setState({repo: e.target.value})\n    }\n\n    handleRepoCreate = (e) => {\n        e.preventDefault()\n        api.repoCreate(this.state.repo).then(response => {\n            this.props.onCreate()\n            this.setState({error:'', showAdd: false, repo:''})\n        })\n        .catch(e => {\n            console.log(formatError(e.response.data))\n            this.setState({error: formatError(e.response.data), message: ''});\n        })\n    }\n\n    render() {\n        let data = this.props.records.map(r => {\n            return {\n                columns:[\n                    {content: r.name, role: 'rowheader'},\n                    {content: r.repo},\n                    {content: r.hash},\n                    {content: r.created},\n                    {content: r.modified},\n                    {content: <Button data-key={r.id} onClick={this.props.onBuild}>{T('build')}</Button>}\n                    ],\n            }\n        })\n\n        return (\n            <section>\n                <Row>\n                    <div>\n                        <h3 className=\"u-float-left\">{T('repo-list')}</h3>\n                        <Button onClick={this.handleAddClick} className=\"u-float-right\">\n                            {T('add-repo')}\n                        </Button>\n                    </div>\n                    {this.state.showAdd ?\n                        <RepoAdd onClick={this.handleRepoCreate} onCancel={this.handleCancelClick} onChange={this.handleRepoChange} repo={this.state.repo}/>\n                        :\n                        ''\n                    }\n                    <MainTable headers={[\n                    {\n                        content: T('name')\n                    }, {\n                        content: T('repo'),\n                        className: \"col-large\"\n                    }, {\n                        content: T('last-commit'),\n                    }, {\n                        content: T('created'),\n                    }, {\n                        content: T('modified'),\n                    }, {\n                        content: T('actions'),\n                    }\n                    ]} rows={data} />\n                </Row>\n            </section>\n        );\n    }\n}\n\nexport default RepoList;","import React from 'react';\n\n\nfunction getIcon(props) {\n    if (props.status==='complete') {\n        return <i className=\"p-icon--success\"></i>\n    } else if (props.status==='failed') {\n        return <i className=\"p-icon--error\"></i>\n    } else {\n        return <i className=\"p-icon--spinner\"></i>\n    }\n}\n\n\nfunction BuildStatus(props) {\n    return (\n        <div className=\"u-align--center\">\n            {getIcon(props)}\n        </div>\n    );\n}\n\nexport default BuildStatus;","import React from 'react';\nimport {T} from \"./Utils\";\nimport {Link} from \"@canonical/react-components\"\n\nfunction BuildActions(props) {\n    return (\n        <div>\n            <Link href={'/builds/'+props.id}  title={T(\"view\")}>\n                <img className=\"action\"  src=\"/static/images/show.svg\" alt={T(\"view\")}/>\n            </Link>\n            {props.download ?\n                <Link href={'/v1/builds/' + props.id + '/download'} title={T(\"download\")}>\n                    <img className=\"action\" src=\"/static/images/download.svg\" alt={T(\"download\")}/>\n                </Link>\n                :\n                ''\n            }\n            <Link href=\"\" title={T(\"delete\")} onClick={props.onConfirmDelete}>\n                <img className=\"action\" src=\"/static/images/delete.svg\" alt={T(\"delete\")} data-key={props.id}/>\n            </Link>\n        </div>\n    );\n}\n\nexport default BuildActions;","import React, {Component} from 'react';\nimport {T} from \"./Utils\";\nimport {MainTable, Row, Modal} from \"@canonical/react-components\";\nimport BuildStatus from \"./BuildStatus\";\nimport BuildActions from \"./BuildActions\";\nimport moment from \"moment\";\n\nclass BuildList extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            confirmDelete: false,\n            delete: {},\n        }\n    }\n\n    handleCancelDelete = (e) => {\n        e.preventDefault()\n        this.setState({confirmDelete: false, delete: {}})\n    }\n\n    handleConfirmDelete = (e) => {\n        e.preventDefault()\n        let id = e.target.getAttribute('data-key')\n        let buildIds = this.props.records.filter(rec => {\n            return rec.id === id\n        })\n\n        if (buildIds.length>0) {\n            this.setState({confirmDelete: true, delete: buildIds[0]})\n        }\n    }\n\n    handleDoDelete = (e) => {\n        e.preventDefault()\n\n        this.props.onDelete(this.state.delete.id)\n        this.setState({confirmDelete: false, delete: {}})\n    }\n\n    renderConfirmDelete() {\n        return (\n                <Modal close={this.handleCancelDelete} title={T('confirm-delete')}>\n                    <p>\n                        {T('confirm-delete-message') + this.state.delete.name + ' (' + this.state.delete.created  +')'}\n                    </p>\n                    <hr />\n                    <div className=\"u-align--right\">\n                        <button onClick={this.handleCancelDelete} className=\"u-no-margin--bottom\">\n                            {T('cancel')}\n                        </button>\n                        <button className=\"p-button--negative u-no-margin--bottom\" onClick={this.handleDoDelete} >\n                            {T('delete')}\n                        </button>\n                    </div>\n                </Modal>\n        )\n    }\n\n    render() {\n        let data = this.props.records.map(r => {\n            let dur =  moment.duration(r.duration,'seconds').minutes() + ' minutes'\n            if (r.duration < 120) {\n                dur = moment.duration(r.duration,'seconds').seconds() + ' seconds'\n            }\n\n            return {\n                columns:[\n                    {content: r.name, role: 'rowheader'},\n                    {content: r.repo},\n                    {content: r.created},\n                    {content: <BuildStatus status={r.status} />},\n                    {content: dur, className: \"col-medium u-align--left\"},\n                    {content: <BuildActions id={r.id} download={r.download} onConfirmDelete={this.handleConfirmDelete}/>, className: \"col-medium u-align--left\"}\n                    ],\n            }\n        })\n\n        return (\n            <section>\n\n                {this.state.confirmDelete ? this.renderConfirmDelete() : ''}\n\n                <Row>\n                    <h3>{T('build-requests')}</h3>\n                    <MainTable headers={[\n                    {\n                        content: T('name')\n                    }, {\n                        content: T('repo'), className: \"col-large\"\n                    }, {\n                        content: T('created'),\n                    }, {\n                        content: T('status'), className: \"u-align--center col-small\"\n                    }, {\n                        content: T('duration'), className: \"col-medium u-align--left\",\n                    }, {\n                        content: T('actions'), className: \"col-medium u-align--left\"\n                    }]} rows={data} />\n                </Row>\n            </section>\n        );\n    }\n}\n\nexport default BuildList;","import React, {Component} from 'react';\nimport RepoList from \"./RepoList\";\nimport BuildList from \"./BuildList\";\nimport api from \"./api\";\nimport {T, formatError} from \"./Utils\";\nimport {Notification} from '@canonical/react-components'\n\nclass Home extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            repos: [\n                {id:'aaa', name:'test', repo:'github.com/TestCompany/test', hash:'abcdef', created:'2020-05-14T19:01:34Z', modified:'2020-05-14T19:01:34Z'}\n            ],\n            builds: [\n                {id:'bbb', name:'test', repo:'github.com/TestCompany/test', status:'complete', duration: 222, created:'2020-05-14T19:30:34Z'}\n            ],\n        }\n    }\n\n    componentDidMount() {\n        this.getDataRepos()\n        this.getDataBuilds()\n    }\n\n    poll = () => {\n        // Polls every 30s\n        setTimeout(this.getDataBuilds.bind(this), 30000);\n    }\n\n    getDataRepos() {\n        api.repoList().then(response => {\n            this.setState({repos: response.data.records})\n        })\n        .catch(e => {\n            console.log(formatError(e.response.data))\n            this.setState({error: formatError(e.response.data), message: ''});\n        })\n    }\n\n    getDataBuilds() {\n        api.buildList().then(response => {\n            this.setState({builds: response.data.records})\n        })\n        .catch(e => {\n            console.log(formatError(e.response.data))\n            this.setState({error: formatError(e.response.data), message: ''});\n        })\n        .finally( ()=> {\n            this.poll()\n        })\n    }\n\n    handleRepoCreateClick = () => {\n        this.getDataRepos()\n    }\n\n    handleBuildClick = (e) => {\n        e.preventDefault()\n        let repoId = e.target.getAttribute('data-key')\n\n        api.build(repoId).then(response => {\n            this.getDataBuilds()\n        })\n        .catch(e => {\n            console.log(formatError(e.response.data))\n            this.setState({error: formatError(e.response.data), message: ''});\n        })\n    }\n\n    handleBuildDelete = (buildId) => {\n        api.buildDelete(buildId).then(response => {\n            this.getDataBuilds()\n        })\n        .catch(e => {\n            console.log(formatError(e.response.data))\n            this.setState({error: formatError(e.response.data), message: ''});\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                {\n                    this.state.error ?\n                        <Notification type=\"negative\" status={T('error') + ':'}>\n                            {this.state.error}\n                        </Notification>\n                        : ''\n                }\n                <RepoList records={this.state.repos} onBuild={this.handleBuildClick} onCreate={this.handleRepoCreateClick}/>\n                <BuildList records={this.state.builds} onDelete={this.handleBuildDelete}/>\n            </div>\n        );\n    }\n}\n\nexport default Home;","import React from 'react';\nimport {Card, Row, Col} from \"@canonical/react-components\";\n\nfunction DetailsCard(props) {\n    return (\n        <Card>\n            {props.fields.map(f => {\n                return (\n                    <Row>\n                        <Col size={2}>{f.label}:</Col>\n                        <Col size={10} className=\"field_value\">{f.value}</Col>\n                    </Row>\n                )\n            })}\n        </Card>\n    );\n}\n\nexport default DetailsCard;","import React, {Component} from 'react';\nimport api from \"./api\";\nimport {formatError, T} from \"./Utils\";\nimport {Row, Code, Notification, Button} from '@canonical/react-components'\nimport DetailsCard from \"./DetailsCard\";\n\nclass BuildLog extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            build: {},\n            error: '',\n            scrollLog: false,\n        }\n    }\n\n    componentDidMount() {\n        this.getData()\n    }\n\n    poll = () => {\n        // Polls every 0.5s\n        setTimeout(this.getData.bind(this), 500);\n    }\n\n    getData() {\n        api.buildGet(this.props.buildId).then(response => {\n            this.setState({build: response.data.record, error:''}, this.scrollToBottom)\n        })\n        .catch(e => {\n            this.setState({error: formatError(e.response.data), message: ''});\n        })\n        .finally( ()=> {\n            this.poll()\n        })\n    }\n\n    scrollToBottom() {\n        if (this.state.scrollLog) {\n            window.scrollTo(0, document.body.clientHeight)\n        }\n    }\n\n    changeScroll() {\n        if (!this.state.scrollLog) {\n            window.scrollTo(0, 0)\n        }\n    }\n\n    handleScrollClick = (e) => {\n        this.setState({scrollLog: !this.state.scrollLog}, this.changeScroll)\n    }\n\n    renderLog() {\n        if (!this.state.build.logs) {return T('getting-ready')+ '\\r\\n'}\n\n        return this.state.build.logs.map(l => {\n            return l.message + '\\r\\n'\n        })\n    }\n\n    render() {\n        return (\n            <Row>\n                <h3>{T('build-log')}</h3>\n                <Row>\n                    {this.state.error ?\n                        <Notification type=\"negative\" status=\"Error:\">{this.state.error}</Notification>\n                    :\n                        ''\n                    }\n\n                    <DetailsCard fields={[\n                        {label: T('name'), value: this.state.build.name},\n                        {label: T('repo'), value: this.state.build.repo},\n                        {label: T('created'), value: this.state.build.created},\n                        {label: T('status'), value: T(this.state.build.status)},\n                        ]} />\n\n                    {this.state.scrollLog ?\n                        ''\n                        :\n                        <Button className=\"col-2\" appearance=\"neutral\" onClick={this.handleScrollClick}>{T('scroll-on')}</Button>\n                    }\n\n                    <Code className=\"log\"s>\n                        {this.renderLog()}\n                    </Code>\n\n                    {this.state.scrollLog ?\n                        <Button className=\"col-2\" appearance=\"brand\" onClick={this.handleScrollClick}>{T('scroll-off')}</Button>\n                        :\n                        ''\n                    }\n                </Row>\n            </Row>\n        );\n    }\n}\n\nexport default BuildLog;","import React, {Component} from 'react';\nimport Header from \"./components/Header\";\nimport Home from \"./components/Home\";\nimport {parseRoute} from \"./components/Utils\";\nimport BuildLog from \"./components/BuildLog\";\n//import createHistory from 'history/createBrowserHistory'\n\n//const history = createHistory()\n\nclass App extends Component {\n    // handleNavigation(location) {\n    //     this.setState({ location: location })\n    //     window.scrollTo(0, 0)\n    // }\n\n    render() {\n        const r = parseRoute()\n\n        return (\n            <div>\n                <Header/>\n\n                {r.section===''? <Home/> : ''}\n                {r.section==='builds'? <BuildLog buildId={r.sectionId} /> : ''}\n\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport \"./scss/index.scss\";\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}